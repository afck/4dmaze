<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <title>4DMaze</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
  <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  <link rel="stylesheet" type="text/css" href="stylesheets/4dmaze.css" media="screen">
</head>
<body>
  <section class="page-header">
    <h1 class="project-name">4dmaze</h1>
    <h2 class="project-tagline">A four-dimensional tile-based maze game</h2>
    <a href="index.html" class="btn">Back to the homepage</a>
    <a href="#game" onclick="loadLevel('mazes/0.txt');" class="btn">Level 0</a>
    <a href="#game" onclick="loadLevel('mazes/1.txt');" class="btn">Level 1</a>
    <a href="#game" onclick="loadLevel('mazes/2.txt');" class="btn">Level 2</a>
    <a href="#game" onclick="loadLevel('mazes/3.txt');" class="btn">Level 3</a>
    <a href="#game" onclick="loadLevel('mazes/4.txt');" class="btn">Level 4</a>
    <a href="#game" onclick="loadLevel('mazes/5.txt');" class="btn">Level 5</a>
    <a href="#game" onclick="loadLevel('mazes/6.txt');" class="btn">Level 6</a>
  </section>
  <section class="anchor main-content" id="game">
    <h2>4D Maze - JavaScript version</h2>
    <p>Play with W, A, S, D and I, J, K, L. For
    details read <a href="index.html">the documentation here</a></p>
    <canvas id="mazeCanvas" onclick="onClickHandler">
      Your browser does not support HTML5. Please upgrade.
    </canvas>
    <div class="controls">
      <div onclick="maze.move([0, 0, 0, -1]); draw();"
           class="arrow"
           title="Major-up: keys I or up arrow">
        &#x2b06;
      </div>
      <br />
      <div onclick="maze.move([0, 0, -1, 0]); draw();"
           class="arrow"
           title="Minor-up: key W">
        &#x21e7;
      </div>
      <br />
      <div onclick="maze.move([0, -1, 0, 0]); draw();"
           class="arrow"
           title="Major-left: keys J or left arrow">
        &#x2b05;
      </div>
      <div onclick="maze.move([-1, 0, 0, 0]); draw();"
           class="arrow"
           title="Minor-left: key A">
        &#x21e6;
      </div>
      <div></div>
      <div onclick="maze.move([1, 0, 0, 0]); draw();"
           class="arrow"
           title="Minor-right: key D">
        &#x21e8;
      </div>
      <div onclick="maze.move([0, 1, 0, 0]); draw();"
           class="arrow"
           title="Major-right: keys L or right arrow">
        &#x27a1;
      </div>
      <br />
      <div onclick="maze.move([0, 0, 1, 0]); draw();"
           class="arrow"
           title="Minor-down: key S">
        &#x21e9;
      </div>
      <br />
      <div onclick="maze.move([0, 0, 0, 1]); draw();"
           class="arrow"
           title="Major-down: keys K or down arrow">
        &#x2b07;
      </div>
    </div>
    <br />
    <button id="editLevelButton"
            type="button"
            onclick="editLevel()">Edit level (Spoiler!)</button>
    <div id="editLevel">
      <p>
        Paste your own levels here to play them! Note that the contents of this
        box are not saved anywhere, so make sure to copy them into a text file.
        See <a href="#editInstructions">below</a> for instructions.
      </p>
      <!-- TODO: wrap="off" is not valid HTML5, but there seems to be no other
                 way to achieve the same effect. -->
      <textarea id="levelText" wrap="off"></textarea>
      <p id="errorMessage"></p>
      <button type="button" onclick="playLevel()">Play!</button>
      <button type="button" onclick="maze.toggleReverseMode(); draw();">
        Toggle construction mode
      </button>
      <button type="button" onclick="loadCurrent()">
        Load current state into the text field
      </button>
      <h2 id="editInstructions" class="anchor">
        Instructions for level editing
      </h2>
      <p>
        In construction mode, you can extend the maze by solving it reversely:
        You can dig through walls, create pairs of locks and keys and other maze
        elements; but it will only allow you to make changes that cannot make a
        solvable maze unsolvable. E. g. if you move to the right and click on
        the boulder in your inventory, it will create a boulder and a hole on
        your left - you have just undone the action of pushing the boulder left
        into the hole, so if the level was solvable in the previous state, it
        still is now.
      </p>
      <p>
        In the text area you can directly edit the level file. Remember that
        this will not be saved on the server, so copy any work that you want to
        preserve into a local text file! The available building blocks are:
      </p>
      <table>
         <thead><th>Symbol</th><th>Level element</th></thead>
         <tbody>
           <tr>
             <td>"S"</td>
             <td><div class="img blockImg"
                      style="background-position: 0px 0px;
                             background-image: url('images/you.png');"></div>
               &nbsp;Starting position</td>
           </tr>
           <tr>
             <td>" "</td>
             <td><div class="img blockImg"
                      style="background-position: 0px 0px"></div>
               &nbsp;Empty square</td>
           </tr>
           <tr>
             <td>"G"</td>
             <td><div class="img blockImg"
                      style="background-position: -336px 0px"></div>
               &nbsp;Goal</td>
           </tr>
           <tr>
             <td>"k"</td>
             <td><div class="img blockImg"
                      style="background-position: -168px 0px"></div>
               &nbsp;Silver key</td>
           </tr>
           <tr>
             <td>"K"</td>
             <td><div class="img blockImg"
                      style="background-position: -196px 0px"></div>
               &nbsp;Golden key</td>
           </tr>
           <tr>
             <td>"h"</td>
             <td><div class="img blockImg"
                      style="background-position: -224px 0px"></div>
               &nbsp;Silver lock</td>
           </tr>
           <tr>
             <td>"H"</td>
             <td><div class="img blockImg"
                      style="background-position: -252px 0px"></div>
               &nbsp;Golden lock</td>
           </tr>
           <tr>
             <td>"r"</td>
             <td><div class="img blockImg"
                      style="background-position: -28px 0px"></div>
               &nbsp;Red square (initially open)</td>
           </tr>
           <tr>
             <td>"g"</td>
             <td><div class="img blockImg"
                      style="background-position: -112px 0px"></div>
               &nbsp;Green square (initially closed)</td>
           </tr>
           <tr>
             <td>"s"</td>
             <td><div class="img blockImg"
                      style="background-position: -140px 0px"></div>
               &nbsp;Red-green toggle switch</td>
           </tr>
           <tr>
             <td>"b"</td>
             <td><div class="img blockImg"
                      style="background-position: -280px 0px"></div>
               &nbsp;Movable boulder</td>
           </tr>
           <tr>
             <td>"B"</td>
             <td><div class="img blockImg"
                      style="background-position: -308px 0px"></div>
               &nbsp;Boulder-sized hole</td>
           </tr>
           <tr>
             <td>"0"</td>
             <td><div class="img blockImg"
                      style="background-position: -364px 0px"></div>
               &nbsp;Wall</td>
           </tr>
           <tr>
             <td>"1"</td>
             <td><div class="img blockImg"
                      style="background-position: -392px 0px"></div>
               &nbsp;Wall</td>
           </tr>
           <tr>
             <td>"2"</td>
             <td><div class="img blockImg"
                      style="background-position: -420px 0px"></div>
               &nbsp;Wall</td>
           </tr>
           <tr>
             <td>"3"</td>
             <td><div class="img blockImg"
                      style="background-position: -448px 0px"></div>
               &nbsp;Wall</td>
           </tr>
           <tr>
             <td>"4"</td>
             <td><div class="img blockImg"
                      style="background-position: -476px 0px"></div>
               &nbsp;Wall</td>
           </tr>
           <tr>
             <td>"5"</td>
             <td><div class="img blockImg"
                      style="background-position: -504px 0px"></div>
               &nbsp;Wall</td>
           </tr>
           <tr>
             <td>"6"</td>
             <td><div class="img blockImg"
                      style="background-position: -532px 0px"></div>
               &nbsp;Wall</td>
           </tr>
           <tr>
             <td>"7"</td>
             <td><div class="img blockImg"
                      style="background-position: -560px 0px"></div>
               &nbsp;Wall</td>
           </tr>
           <tr>
             <td>"8"</td>
             <td><div class="img blockImg"
                      style="background-position: -588px 0px"></div>
               &nbsp;Wall</td>
           </tr>
           <tr>
             <td>"9"</td>
             <td><div class="img blockImg"
                      style="background-position: -616px 0px"></div>
               &nbsp;Wall</td>
           </tr>
         </tbody>
      </table>
    </div>
  </section>
  <script src="js/constants.js"></script>
  <script src="js/maze.js"></script>
  <script src="js/game.js"></script>
  <iframe id="levelFile"
          src="mazes/0.txt"
          onload="loadMaze();"
          style="display: none;"></iframe>
</body>
</html>
